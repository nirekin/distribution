---
ekara:
  components:
    ek-aws:
      repository: ekara-platform/aws-provider
      ref: master
    ek-swarm:
      repository: adrienlauer/swarm-orchestrator
      ref: copy-support
    ek-swarm-visualizer:
      repository: ekara-platform/swarm-visualizer-stack
      ref: v1.0.0

vars:
  ekara:
    path: /var/lib/ekara

providers:
  ek-aws:
    component: ek-aws
    params:
      securityGroups:
        ek-ssh:
          rules:
          - proto: tcp
            ports:
            - 22
            cidr_ip: 0.0.0.0/0
            rule_desc: Node SSH access
        ek-swarm:
          rules:
          - proto: tcp
            ports:
            - 2377
            - 7946
            cidr_ip: 0.0.0.0/0
            rule_desc: Swarm TCP communication
          - proto: udp
            ports:
            - 7946
            - 4789
            cidr_ip: 0.0.0.0/0
            rule_desc: Swarm UDP communication
      volumes:
        volumes:
          ekara:
            ebs:
              volume_size: 20
              delete_on_termination: true
            fs:
              mount_path: /var/lib/ekara

orchestrator:
  component: ek-swarm
  params:
    daemon:
      data-root: /var/lib/ekara/docker

